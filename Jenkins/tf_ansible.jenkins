#!groovy
// Run TF

properties([disableConcurrentBuilds()])

pipeline {
  agent any

  options {
      buildDiscarder(logRotator(numToKeepStr: '10', artifactNumToKeepStr: '10'))
      timestamps()
  }

  stages {

    stage('TF Init&Plan') {
      steps {
        withAWS(credentials: 'jenkins-aws-credentials', region: 'eu-west-1') {
        dir (Terraform) {
        sh 'terraform init'
        sh 'terraform plan'
      }
        }
      }
    }

}
}
